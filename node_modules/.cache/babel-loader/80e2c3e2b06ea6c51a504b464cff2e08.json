{"ast":null,"code":"var _jsxFileName = \"/Users/pratish/Desktop/drive/app-to-maintain-records-of-patient/src/components/Login.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport { Redirect } from 'react-router-dom';\nimport Navbar from './NavBar';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Login = () => {\n  _s();\n\n  const [state, setState] = React.useState({\n    physicianID: \"\",\n    password: \"\"\n  });\n  const [loggedIn, setloggedIn] = useState(false);\n  const [phydata, setphydata] = useState(null);\n\n  function handleChange(evt) {\n    evt.preventDefault();\n    const value = evt.target.value;\n    setState({ ...state,\n      [evt.target.name]: value\n    });\n  }\n\n  useEffect(() => {\n    getData();\n\n    async function getData() {\n      const response = await fetch(\"http://localhost:3500/physicians\");\n      const data = await response.json();\n      setphydata(data);\n    }\n  }, []);\n\n  function submitLogin(e) {\n    e.preventDefault();\n    let logIn = false;\n\n    for (let item of phydata) {\n      if (item.physicianID === parseInt(state.physicianID) && item.password === state.password) {\n        setloggedIn(true);\n        logIn = true;\n        const now = new Date();\n        const item = {\n          value: new Date().getTime().toString(),\n          expiry: now.getTime() + 86400000 * 2 // expiry: now.getTime() + 5000\n\n        };\n        localStorage.setItem(\"token\", JSON.stringify(item));\n      }\n    }\n\n    if (logIn === false) alert(\"Please enter correct physician login credentials!!\");\n  }\n\n  if (loggedIn === true || localStorage.getItem(\"token\") != null) {\n    return /*#__PURE__*/_jsxDEV(Redirect, {\n      to: \"/dashboard/\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 16\n    }, this);\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    \"data-testid\": \"login-1\",\n    children: [/*#__PURE__*/_jsxDEV(Navbar, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"dashdiv\",\n      children: /*#__PURE__*/_jsxDEV(\"form\", {\n        action: \"\",\n        onSubmit: submitLogin,\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: /*#__PURE__*/_jsxDEV(\"b\", {\n            children: \"Physician ID: \"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 57,\n            columnNumber: 28\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 57,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          name: \"physicianID\",\n          placeholder: \"Physician ID..\",\n          value: state.physicianID,\n          onChange: handleChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 58,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 59,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 59,\n          columnNumber: 26\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          children: /*#__PURE__*/_jsxDEV(\"b\", {\n            children: \"Password: \"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 60,\n            columnNumber: 28\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 60,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"Password\",\n          name: \"password\",\n          placeholder: \"Password..\",\n          value: state.password,\n          onChange: handleChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 61,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 26\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"button\",\n          type: \"submit\",\n          value: \"Login\",\n          onChange: handleChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 63,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 53,\n    columnNumber: 9\n  }, this);\n};\n\n_s(Login, \"5cecS5eFst9VsVANlWB6jje4D+k=\");\n\n_c = Login;\nexport default Login;\n\nvar _c;\n\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"sources":["/Users/pratish/Desktop/drive/app-to-maintain-records-of-patient/src/components/Login.js"],"names":["React","useState","useEffect","Redirect","Navbar","Login","state","setState","physicianID","password","loggedIn","setloggedIn","phydata","setphydata","handleChange","evt","preventDefault","value","target","name","getData","response","fetch","data","json","submitLogin","e","logIn","item","parseInt","now","Date","getTime","toString","expiry","localStorage","setItem","JSON","stringify","alert","getItem"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react'\r\nimport { Redirect } from 'react-router-dom'\r\nimport Navbar from './NavBar';\r\n\r\nconst Login = () => {\r\n    const [state, setState] = React.useState( { physicianID: \"\", password: \"\" } );\r\n    const [loggedIn, setloggedIn] = useState(false);\r\n    const [phydata, setphydata] = useState(null);\r\n    \r\n    function handleChange(evt) {\r\n        evt.preventDefault();\r\n        const value = evt.target.value;\r\n        setState({\r\n          ...state,\r\n          [evt.target.name]: value\r\n        });\r\n    }\r\n\r\n    useEffect(() => {\r\n        getData();    \r\n        async function getData() {\r\n            const response = await fetch(\"http://localhost:3500/physicians\");\r\n            const data = await response.json();\r\n    \r\n            setphydata(data);\r\n        }\r\n      }, []);\r\n\r\n    function submitLogin(e){\r\n        e.preventDefault();\r\n        let logIn=false;\r\n        for (let item of phydata){\r\n            if(item.physicianID===parseInt(state.physicianID) && item.password===state.password){\r\n                setloggedIn(true);\r\n                logIn=true;\r\n                const now = new Date();\r\n                const item = {\r\n                    value: new Date().getTime().toString(),\r\n                    expiry: now.getTime() + 86400000*2\r\n                    // expiry: now.getTime() + 5000\r\n                }\r\n                localStorage.setItem(\"token\", JSON.stringify(item));\r\n            }\r\n        }\r\n        if(logIn===false) alert(\"Please enter correct physician login credentials!!\")  \r\n    }   \t\r\n    \r\n    if(loggedIn===true || localStorage.getItem(\"token\")!=null){\r\n        return <Redirect to=\"/dashboard/\" />\r\n    }\r\n\r\n    return (\r\n        <div data-testid='login-1'>\r\n            <Navbar/>\r\n            <div className='dashdiv'>\r\n                <form action='' onSubmit={submitLogin}>    \r\n                    <label><b>Physician ID: </b></label>    \r\n                    <input type=\"text\" name=\"physicianID\" placeholder=\"Physician ID..\" value={state.physicianID} onChange={handleChange} /> \r\n                    <br/><br/>\r\n                    <label><b>Password: </b></label>    \r\n                    <input type=\"Password\" name=\"password\" placeholder=\"Password..\" value={state.password} onChange={handleChange} />\r\n                    <br/><br/> \r\n                    <input type=\"button\" type=\"submit\" value=\"Login\" onChange={handleChange} />     \r\n                </form>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Login\r\n"]},"metadata":{},"sourceType":"module"}